<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
</head>
<body>

     
    <button id="1" value="1">1</button>
    <button id="2" value="1">2</button>
    <button id="3" value="1">3</button>
    <button id="4" value="1">4</button>
    <button id="5" value="1">5</button>
    <button id="6" value="1">6</button>
    <button id="7" value="1">7</button>
    <button id="8" value="1">8</button>
    <button id="9" value="1">9</button>
    <button id="0" value="1">0</button>
    <button id="+" >+</button>
    <button id="-" >-</button>
    <button id="*" >*</button>
    <button id="/" >/</button>
    <button id="CE" >CE</button>
    <button id="=" >=</button>
    <span id="display"></span>
    
</body>
<script>
    /* Funções de cada membro
        Rafael e Ana: Back-end e dinamização do código.
        Rebecca, Giullia e Nicollas: Front de End
    */    

    var botao1 = document.getElementById("1");
    var botao2 = document.getElementById("2");
    var botao3 = document.getElementById("3");
    var botao4 = document.getElementById("4");
    var botao5 = document.getElementById("5");
    var botao6 = document.getElementById("6");
    var botao7 = document.getElementById("7");
    var botao8 = document.getElementById("8");
    var botao9 = document.getElementById("9");
    var botao0 = document.getElementById("0");
    var botaoMais = document.getElementById("+");
    var botaoMenos = document.getElementById("-");
    var botaoVezes = document.getElementById("*");
    var botaoDividir = document.getElementById("/");
    var botaoCE = document.getElementById("CE");
    var botaoIgual = document.getElementById("=");
    var display = document.getElementById("display");

    var calculadora = {
        botaomais: botaoMais,
        botao1: botao1,
        botao2: botao2,
        botao3: botao3,
        botao4: botao4,
        botao5: botao5,
        botao6: botao6,
        botao7: botao7,
        botao8: botao8,
        botao9: botao9,
        botao0: botao0,
        botaoIgual: botaoIgual,
        botaodividir:botaoDividir,
        botaomenos:botaoMenos,
        botaovezes:botaoVezes,
        botaoCE:botaoCE,
        display: display,
        numero:0
        }
    let aux = [];
    let aux2 = [];
    let soma = 0;

    
    calculadora.botao1.addEventListener("click",function(){
        display.textContent += 1;
        
    });
    calculadora.botao2.addEventListener("click",function(){
        display.textContent += 2;
        
    });
    calculadora.botao3.addEventListener("click",function(){
        display.textContent += 3;
        
    });
    calculadora.botao4.addEventListener("click",function(){
        display.textContent += 4;
        
    });
    calculadora.botao5.addEventListener("click",function(){
        display.textContent += 5;
        
    });
    calculadora.botao6.addEventListener("click",function(){
        display.textContent += 6;
        
    });
    calculadora.botao7.addEventListener("click",function(){
        display.textContent += 7;
        
    });
    calculadora.botao8.addEventListener("click",function(){
        display.textContent += 8;
        
    });
    calculadora.botao9.addEventListener("click",function(){
        display.textContent += 9;
        
    });
    calculadora.botao0.addEventListener("click",function(){
        display.textContent += 0;
        
    });
   
    calculadora.botaomais.addEventListener("click",function(){
        if(isNaN(parseInt(display.textContent[display.textContent - 1]))){
            display.textContent.replace(display.textContent[display.textContent - 1]," + ")
        }
        display.textContent += " + ";
    })
    calculadora.botaovezes.addEventListener("click",function(){
        display.textContent += " * ";
    })
    calculadora.botaodividir.addEventListener("click",function(){
        display.textContent += " / ";
    })
    calculadora.botaomenos.addEventListener("click",function(){
        display.textContent += " - ";
    })
    calculadora.botaoCE.addEventListener("click",function(){
        display.textContent = "";
        soma = 0;
    })
    calculadora.botaoIgual.addEventListener("click",function(){
        aux = display.textContent.split(" ");
        console.log(aux);
        //BUG FIX
        //1 - Operador na 1° posição
        if(isNaN(parseInt(aux[0])))//converte o elemento na posição 0 para numero, caso não seja numero retorna true
        {   
            if(aux[1] != "-"){
                aux.shift();
                aux.shift();
                console.log(aux);
            }
        }
        //2 - Operador na ultima posição
        if(isNaN(parseInt(aux[aux.length - 1]))){//converte o ultimo elemento para numero, caso não seja numero retorna true
            aux.pop();
            aux.pop();
            console.log(aux);
        }
        //3 - Operador Repetido entre os números
        let contador = 0;
        for(let i = aux.length; i >= 0; i--){//sempre que um operador repete ele deixa um "" no array, então procuramos esse "" depois deletamos ele e o operador anterior (que é repetido).
            if(aux[i] == ""){
                aux.splice(i-1,2);
                console.log(aux);
            }
        }
        
        aux2 = aux.join("");
        soma = eval(aux2);
        display.textContent = soma;
        soma = 0;
    });

</script>

</html>